(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat-set-chat-set"],{"00d2":function(t,e){},"325c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={freeNavBar:i("3e12").default,freeAvater:i("44e9").default,freeDivider:i("8406").default,freeListItem:i("7474").default,tuiIcon:i("0010").default,freeConfirm:i("eb50").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{"background-color":"#EDEDED"}},[i("free-nav-bar",{attrs:{title:"聊天信息",showBack:!0,showRight:!1}}),i("v-uni-view",{staticClass:"flex flex-wrap py-3 bg-white"},["user"===t.detail.chat_type?i("v-uni-view",{staticClass:"flex flex-column align-center justify-center mb-2",staticStyle:{width:"150rpx"}},[i("free-avater",{attrs:{src:t.detail.avatar||"/static/images/userpic.png",size:"110"}}),i("v-uni-text",{staticClass:"font text-muted mt-1"},[t._v(t._s(t.detail.name))])],1):t._l(t.list,(function(e,n){return i("v-uni-view",{key:n,staticClass:"flex flex-column align-center justify-center mb-2",staticStyle:{width:"150rpx"}},[i("free-avater",{attrs:{src:e.avatar||"/static/images/userpic.png",size:"110"}}),i("v-uni-text",{staticClass:"font text-muted mt-1"},[t._v(t._s(e.name))])],1)})),i("v-uni-view",{staticClass:"flex flex-column align-center justify-center mb-2",staticStyle:{width:"150rpx"}},[i("v-uni-view",{staticClass:"flex align-center justify-center border",staticStyle:{width:"120rpx",height:"120rpx"},attrs:{"hover-class":"bg-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openMail.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-light-muted",staticStyle:{"font-size":"100rpx"}},[t._v("+")])],1)],1),"group"===t.detail.chat_type?i("v-uni-view",{staticClass:"flex flex-column align-center justify-center mb-2",staticStyle:{width:"150rpx"}},[i("v-uni-view",{staticClass:"flex align-center justify-center border",staticStyle:{width:"120rpx",height:"120rpx"},attrs:{"hover-class":"bg-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteUser.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-light-muted",staticStyle:{"font-size":"100rpx"}},[t._v("-")])],1)],1):t._e()],2),"group"===t.detail.chat_type?i("v-uni-view",[i("free-divider"),i("free-list-item",{attrs:{title:"群聊名称",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateName.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font text-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.detail.name))])],1),i("free-list-item",{attrs:{title:"群二维码",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCode.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{slot:"right",name:"qrcode",size:24},slot:"right"})],1),i("free-list-item",{attrs:{title:"群公告",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGroupRemark.apply(void 0,arguments)}}})],1):t._e(),i("free-divider"),i("free-list-item",{attrs:{title:"查找聊天记录",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openHistory.apply(void 0,arguments)}}}),i("free-divider"),i("free-list-item",{attrs:{title:"消息免打扰",showRight:!0,showLeftIcon:!1,showRightIcon:!1}},[i("v-uni-switch",{attrs:{slot:"right",checked:t.detail.nowarn,color:"#08C060"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.updateChatItem(e,"nowarn")}},slot:"right"})],1),i("free-list-item",{attrs:{title:"置顶聊天",showRight:!0,showLeftIcon:!1,showRightIcon:!1}},[i("v-uni-switch",{attrs:{slot:"right",checked:t.detail.istop,color:"#08C060"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.updateChatItem(e,"istop")}},slot:"right"})],1),i("free-list-item",{attrs:{title:"强提醒",showRight:!0,showLeftIcon:!1,showRightIcon:!1}},[i("v-uni-switch",{attrs:{slot:"right",checked:t.detail.strongwarn,color:"#08C060"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.updateChatItem(e,"strongwarn")}},slot:"right"})],1),"group"===t.detail.chat_type?i("v-uni-view",[i("free-divider"),i("free-list-item",{attrs:{title:"我在本群的昵称",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateNickname.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font text-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.nickname))])],1),i("free-list-item",{attrs:{title:"显示群成员昵称",showRight:!0,showLeftIcon:!1,showRightIcon:!1}},[i("v-uni-switch",{attrs:{slot:"right",checked:t.detail.shownickname,color:"#08C060"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.updateChatItem(e,"shownickname")}},slot:"right"})],1)],1):t._e(),i("free-divider"),i("free-list-item",{attrs:{title:"清空聊天记录",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}}),i("free-divider"),i("free-list-item",{attrs:{title:"投诉",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openReport.apply(void 0,arguments)}}}),i("free-divider"),"group"===t.detail.chat_type?i("v-uni-view",{staticClass:"py-3 flex align-center justify-center bg-white",attrs:{"hover-class":"bg-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.quit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font-md text-danger"},[t._v("删除并退出")])],1):t._e(),i("free-confirm",{ref:"confirm",attrs:{title:"修改"+t.confirmTitle}},[i("v-uni-input",{staticClass:"border-bottom font-md",attrs:{type:"text",placeholder:t.confirmTitle},model:{value:t.confirmText,callback:function(e){t.confirmText=e},expression:"confirmText"}})],1),i("v-uni-view",{staticStyle:{height:"200rpx"}})],1)},r=[]},"44e9":function(t,e,i){"use strict";i.r(e);var n=i("d271"),a=i("e210");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var c,o=i("f0c5"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"4ec237a5",null,!1,n["a"],c);e["default"]=s.exports},"5e0e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{title:{type:String,default:"提示"}},data:function(){return{callback:!1}},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.callback=t,this.$refs.confirm.show()},cancel:function(){this.$refs.confirm.hide()},confirm:function(){var t=this;"function"===typeof this.callback&&this.callback((function(){t.cancel()}))}}};e.default=n},"6b8a":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={freePopup:i("b042").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("free-popup",{ref:"confirm",attrs:{center:!0,maskColor:!0,transformOrigin:"center center"}},[i("v-uni-view",{staticClass:"bg-white rounded",staticStyle:{width:"600rpx"}},[i("v-uni-view",{staticClass:"p-4 flex flex-column"},[i("v-uni-text",{staticClass:"font-md font-weight-bold mb-3"},[t._v(t._s(t.title))]),t._t("default")],2),i("v-uni-view",{staticClass:"border-top flex align-stretch",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex-1 border-right flex align-center justify-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font-md text-muted"},[t._v("取消")])],1),i("v-uni-view",{staticClass:"flex-1 flex align-center justify-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font-md main-text-color"},[t._v("确定")])],1)],1)],1)],1)},r=[]},"76ba":function(t,e,i){"use strict";i.r(e);var n=i("00d2"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},8406:function(t,e,i){"use strict";i.r(e);var n=i("840b"),a=i("76ba");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var c,o=i("f0c5"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"d2edf0b6",null,!1,n["a"],c);e["default"]=s.exports},"840b":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{height:"18rpx","background-color":"#EFEDE9"}})},r=[]},"9cc9":function(t,e,i){"use strict";i.r(e);var n=i("5e0e"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},a52a:function(t,e,i){"use strict";i.r(e);var n=i("b137"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},b137:function(t,e,i){"use strict";var n=i("4ea4");i("99af"),i("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530")),r=i("26cb"),c=i("3353"),o={data:function(){return{confirmType:"name",confirmText:"",list:[],nickname:"",detail:{id:0,chat_type:"user",avatar:"",name:"",istop:!1,shownickname:!1,nowarn:!1,strongwarn:!1,user_id:0,remark:"",invite_confirm:0}}},onLoad:function(t){if(!t.params)return this.backToast();var e=JSON.parse(t.params);if(e=this.chat.getChatListItem(e.id,e.chat_type),!e)return this.backToast();this.detail=e},onShow:function(){var t=this;"group"===this.detail.chat_type&&(0,c.info)({id:this.detail.id}).then((function(e){var i=e.data.data;t.list=i.groupUsers.map((function(e){return e.id===t.user.id&&(t.nickname=e.groupNickname),{id:e.id,name:e.groupNickname,avatar:e.avatar}})),t.detail.name=i.name,t.detail.avatar=i.avatar,t.detail.remark=i.remark}))},computed:(0,a.default)((0,a.default)({},(0,r.mapState)({chat:function(t){return t.user.chat},user:function(t){return t.user.user}})),{},{confirmTitle:function(){return"name"===this.confirmType?"群名称":"昵称"}}),methods:{updateChatItem:function(t,e){this.detail[e]=t.detail.value,this.chat.updateChatItem({id:this.detail.id,chat_type:this.detail.chat_type},this.detail)},openMail:function(){var t="user"===this.detail.chat_type?"?type=createGroup":"?type=inviteGroup&id="+this.detail.id;uni.navigateTo({url:"../../mail/mail/mail"+t})},updateName:function(){var t=this;t.confirmType="name",t.confirmText=t.detail.name,t.$refs.confirm.show((function(e){if(""==t.confirmText)return uni.showToast({title:"群名称不能为空",icon:"none"});(0,c.rename)({id:t.detail.id,name:t.confirmText}).then((function(e){t.detail.name=t.confirmText})),e()}))},updateNickname:function(){this.confirmType="nickname",this.confirmText=this.nickname,this.$refs.confirm.show((function(t){}))},openGroupRemark:function(){uni.navigateTo({url:"../group-remark/group-remark?params="+encodeURIComponent(JSON.stringify({id:this.detail.id,remark:this.detail.remark}))})},openReport:function(){uni.navigateTo({url:"/pages/mail/user-report/user-report?params="+JSON.stringify({user_id:this.detail.id,type:this.detail.chat_type})})},quit:function(){uni.showModal({content:"是否要删除或退出该群聊？",success:function(t){t.cancel}})},openCode:function(){uni.navigateTo({url:"../../my/code/code?params="+encodeURIComponent(JSON.stringify({id:this.detail.id,name:this.detail.name,avatar:this.detail.avatar}))+"&type=group"})},clear:function(){var t=this;uni.showModal({content:"是否要清空聊天记录？",success:function(e){e.confirm&&(t.chat.clearChatDetail(t.detail.id,t.detail.chat_type),uni.showToast({title:"清空成功",icon:"none"}),uni.$emit("updateHistory"))}})},openHistory:function(){uni.navigateTo({url:"../chat-history/chat-history?chat_type=".concat(this.detail.chat_type,"&id=").concat(this.detail.id)})},deleteUser:function(){uni.navigateTo({url:"../group-user/group-user?id="+this.detail.id})}}};e.default=o},d271:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-image",{class:t.type,style:t.getStyle,attrs:{src:t.src?t.src:"/static/images/userpic.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickEvent.apply(void 0,arguments)}}})},r=[]},dee2:function(t,e,i){"use strict";i("99af"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{size:{type:[String,Number],default:90},src:{type:String,default:""},type:{type:String,default:"rounded"},clickType:{type:String,default:"none"}},computed:{getStyle:function(){return"width: ".concat(this.size,"rpx;height: ").concat(this.size,"rpx;")}},methods:{clickEvent:function(){switch(this.clickType){case"navigate":uni.navigateTo({url:"/pages/mail/user-base/user-base"});break;default:this.$emit("click");break}}}};e.default=n},e210:function(t,e,i){"use strict";i.r(e);var n=i("dee2"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},eb50:function(t,e,i){"use strict";i.r(e);var n=i("6b8a"),a=i("9cc9");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var c,o=i("f0c5"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"0451b848",null,!1,n["a"],c);e["default"]=s.exports},ef0b:function(t,e,i){"use strict";i.r(e);var n=i("325c"),a=i("a52a");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);var c,o=i("f0c5"),s=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"6ecb3348",null,!1,n["a"],c);e["default"]=s.exports}}]);