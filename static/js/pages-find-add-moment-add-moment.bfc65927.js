(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-find-add-moment-add-moment"],{"0db0":function(t,e,n){"use strict";n.r(e);var i=n("c435"),a=n("3c83");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var r,u=n("f0c5"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"6b4f1cdd",null,!1,i["a"],r);e["default"]=o.exports},1524:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"rounded mr-2 px-2 py-1",class:t.disabled?"bg-light border":"main-bg-color",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickEvent.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"font",class:t.disabled?"text-light-muted":"text-white"},[t._v(t._s(t.name))])],1)},s=[]},"24d6":function(t,e,n){"use strict";(function(t){n("99af"),n("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("3829"),a=n("3724"),s={data:function(){return{content:"",imageList:[],type:"image",video:!1,remindList:[],seeObj:{k:"all",v:[]}}},onLoad:function(t){this.type=t.type,uni.$on("sendResult",this.sendResult)},destroyed:function(){uni.$off("sendResult",this.sendResult)},computed:{seeText:function(){var t={all:"公开",none:"私密",only:"谁可以看",except:"不给谁看"};if("all"===this.seeObj.k||"none"===this.seeObj.k)return t[this.seeObj.k];var e=this.seeObj.v.map((function(t){return t.name})).join(",");return"".concat(t[this.seeObj.k],":").concat(e)},seeData:function(){if("all"===this.seeObj.k||"none"===this.seeObj.k)return this.seeObj.k;var t=this.seeObj.v.map((function(t){return t.user_id})).join(",");return"".concat(this.seeObj.k,":").concat(t)}},methods:{sendResult:function(t){"remind"===t.type&&(this.remindList=t.data),"see"===t.type&&(this.seeObj=t.data)},openRemind:function(){uni.navigateTo({url:"../../mail/mail/mail?type=remind"})},openSee:function(){uni.navigateTo({url:"../../mail/mail/mail?type=see"})},submit:function(){var t={content:this.content,image:this.imageList,video:this.video?JSON.stringify(this.video):"",type:this.type,location:"",remind:this.remindList,see:this.seeData};(0,a.create)(t).then((function(t){uni.showToast({title:"发布成功",icon:"none"}),uni.navigateBack({delta:1})})).catch((function(t){}))},updateImage:function(t){this.imageList=t},uploadVideo:function(){var e=this;uni.chooseVideo({maxDuration:10,success:function(n){(0,i.upload)({filePath:n.tempFilePath},(function(e){t.log("上传进度",e)})).then((function(n){t.log("uploadTask _res:",n),e.video={src:n.url,poster:n.url+"?x-oss-process=video/snapshot,t_10,m_fast,w_300,f_png"}}))}})}}};e.default=s}).call(this,n("5a52")["default"])},"2ad5":function(t,e,n){"use strict";n.r(e);var i=n("fccf"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},3724:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.timeline=e.comment=e.like=e.toTimeline=e.create=e.list=void 0;var a=i(n("5c48")),s=function(t){return(0,a.default)({url:"/moment/list",method:"POST",data:t})};e.list=s;var r=function(t){return(0,a.default)({url:"/moment/create",method:"POST",data:t})};e.create=r;var u=function(t){return(0,a.default)({url:"/moment/toTimeline",method:"POST",data:t})};e.toTimeline=u;var o=function(t){return(0,a.default)({url:"/moment/like",method:"POST",data:t})};e.like=o;var c=function(t){return(0,a.default)({url:"/moment/comment",method:"POST",data:t})};e.comment=c;var l=function(t){return(0,a.default)({url:"/moment/timeline",method:"POST",data:t})};e.timeline=l},"3c83":function(t,e,n){"use strict";n.r(e);var i=n("24d6"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"40db":function(t,e,n){"use strict";n.r(e);var i=n("1524"),a=n("9857");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var r,u=n("f0c5"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"40510ab7",null,!1,i["a"],r);e["default"]=o.exports},"44e9":function(t,e,n){"use strict";n.r(e);var i=n("d271"),a=n("e210");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var r,u=n("f0c5"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"4ec237a5",null,!1,i["a"],r);e["default"]=o.exports},9857:function(t,e,n){"use strict";n.r(e);var i=n("9a79"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"9a79":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{name:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{clickEvent:function(){this.disabled||this.$emit("click")}}};e.default=i},b046:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={tuiIcon:n("0010").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex flex-wrap"},[t._l(t.imageList,(function(e,i){return n("v-uni-view",{key:i,staticClass:"flex align-center justify-center pt-2 position-relative",staticStyle:{width:"230rpx"}},[n("v-uni-image",{staticClass:"bg-light rounded",staticStyle:{width:"210rpx",height:"210rpx"},attrs:{src:e},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.preview(e)}}}),n("v-uni-view",{staticClass:"flex align-center justify-center rounded-circle",staticStyle:{width:"60rpx",height:"60rpx",position:"absolute",top:"10rpx",right:"0","background-color":"rgba(0,0,0,0.5)"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.deleteImage(e)}}},[n("tui-icon",{attrs:{name:"shut",size:24}})],1)],1)})),t.imageList.length<9?n("v-uni-view",{staticClass:"flex align-center justify-center",staticStyle:{width:"230rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex align-center justify-center bg-light rounded",staticStyle:{width:"210rpx",height:"210rpx"}},[n("v-uni-text",{staticClass:"text-light-muted",staticStyle:{"font-size":"100rpx"}},[t._v("+")])],1)],1):t._e()],2)},s=[]},c20c:function(t,e,n){"use strict";n.r(e);var i=n("b046"),a=n("2ad5");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var r,u=n("f0c5"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"586dea83",null,!1,i["a"],r);e["default"]=o.exports},c435:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={freeNavBar:n("3e12").default,freeMainButton:n("40db").default,freeUploadImage:n("c20c").default,freeListItem:n("7474").default,freeAvater:n("44e9").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"px-3"},[n("free-nav-bar",{attrs:{showBack:!0,showRight:!0,bgColor:"bg-white"}},[n("free-main-button",{attrs:{slot:"right",name:"发表"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},slot:"right"})],1),n("v-uni-textarea",{staticClass:"p-2 font-md mb-3",attrs:{placeholder:"这一刻的想法"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),"image"===t.type?n("free-upload-image",{attrs:{list:t.imageList},on:{update:function(e){arguments[0]=e=t.$handleEvent(e),t.updateImage.apply(void 0,arguments)}}}):t._e(),"video"!==t.type||t.video?t._e():n("v-uni-view",{staticClass:"flex align-center justify-center bg-light rounded",staticStyle:{height:"350rpx"},attrs:{"hover-class":"bg-hover-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadVideo.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"text-muted",staticStyle:{"font-size":"100rpx"}},[t._v("+")])],1),"video"===t.type&&t.video&&t.video.src?n("v-uni-video",{attrs:{src:t.video.src,poster:t.video.poster,controls:!0}}):t._e(),"video"===t.type&&t.video&&t.video.src?n("v-uni-view",{staticClass:"my-3 flex align-center justify-center bg-light",staticStyle:{height:"100rpx"},attrs:{"hover-class":"bg-hover-light"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadVideo.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"font-md text-muted"},[t._v("点击切换视频")])],1):t._e(),n("free-list-item",{attrs:{title:"提醒谁看",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openRemind.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex",attrs:{slot:"right"},slot:"right"},t._l(t.remindList,(function(t,e){return n("v-uni-view",{key:e,staticClass:"ml-1"},[n("free-avater",{attrs:{src:t.avatar,size:"50"}})],1)})),1)],1),n("free-list-item",{attrs:{title:"谁可以看",showRight:!0,showLeftIcon:!1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSee.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"font-md",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.seeText))])],1)],1)},s=[]},d271:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-image",{class:t.type,style:t.getStyle,attrs:{src:t.src?t.src:"/static/images/userpic.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickEvent.apply(void 0,arguments)}}})},s=[]},dee2:function(t,e,n){"use strict";n("99af"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{size:{type:[String,Number],default:90},src:{type:String,default:""},type:{type:String,default:"rounded"},clickType:{type:String,default:"none"}},computed:{getStyle:function(){return"width: ".concat(this.size,"rpx;height: ").concat(this.size,"rpx;")}},methods:{clickEvent:function(){switch(this.clickType){case"navigate":uni.navigateTo({url:"/pages/mail/user-base/user-base"});break;default:this.$emit("click");break}}}};e.default=i},e210:function(t,e,n){"use strict";n.r(e);var i=n("dee2"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},fccf:function(t,e,n){"use strict";(function(t){n("c740"),n("4160"),n("a434"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("3829"),a={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{imageList:[]}},mounted:function(){this.imageList=this.list},methods:{chooseImage:function(){var e=this;uni.chooseImage({count:9-this.imageList.length,sizeType:["compressed"],success:function(n){n.tempFilePaths.forEach((function(n){(0,i.upload)({filePath:n},(function(e){t.log("上传进度",e)})).then((function(n){t.log("uploadTask _res:",n),e.imageList.push(n.url),e.$emit("update",e.imageList)}))}))}})},preview:function(t){uni.previewImage({current:t,urls:this.imageList})},deleteImage:function(t){var e=this;uni.showModal({content:"是否要删除该图片？",success:function(n){if(n.confirm){var i=e.imageList.findIndex((function(e){return e===t}));-1!==i&&(e.imageList.splice(i,1),e.$emit("update",e.imageList))}}})}}};e.default=a}).call(this,n("5a52")["default"])}}]);