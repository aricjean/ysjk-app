(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-find-live-live"],{"0095":function(t,e,i){"use strict";i.r(e);var n=i("3422"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"0885":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-scroll-view",{staticStyle:{width:"520rpx",height:"500rpx"},attrs:{"scroll-y":"true"}},t._l(t.gifts,(function(e,n){return i("cell",{key:n,ref:"item"+n,refInFor:!0,staticClass:"flex align-center px-3 pt-3",attrs:{"insert-animation":"default","delete-animation":"default"}},[i("v-uni-view",{staticClass:"flex rounded-circle",staticStyle:{width:"325rpx","background-image":"linear-gradient(to right, #BCABB1 , #65AAF0)"}},[i("v-uni-view",{staticClass:"p"},[i("v-uni-image",{staticClass:"rounded-circle",staticStyle:{width:"70rpx",height:"70rpx"},attrs:{src:e.avatar||t.defaultAvatar}})],1),i("v-uni-view",{staticClass:"flex-1 flex flex-column justify-center"},[i("v-uni-text",{staticClass:"text-white font"},[t._v(t._s(e.username))]),i("v-uni-text",{staticClass:"text-white font-sm"},[t._v("送"+t._s(e.gift_name))])],1),i("v-uni-view",{staticClass:"p"},[i("v-uni-image",{staticClass:"rounded-circle",staticStyle:{width:"70rpx",height:"70rpx"},attrs:{src:e.gift_image}})],1)],1),i("v-uni-text",{staticClass:"text-warning font-lg ml-1"},[t._v("X "+t._s(e.num))])],1)})),1)},s=[]},"30b61":function(t,e,i){"use strict";i.r(e);var n=i("0885"),a=i("a84c");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);var r,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"b3e67d16",null,!1,n["a"],r);e["default"]=c.exports},3422:function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("caad"),i("c975"),i("a434"),i("a9e3"),i("25eb"),i("e25e"),i("2532"),i("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530")),s=i("a4b7"),r=i("d4f8"),o=i("26cb"),c={data:function(){return{id:0,detail:null,sign:"",statusBarHeight:0,windowHeight:400,content:"",gifts:[{id:1,name:"gift1",coin:1,image:"/static/images/userpic.png"},{id:2,name:"gift2",coin:2,image:"/static/images/userpic.png"},{id:3,name:"gift3",coin:3,image:"/static/images/userpic.png"},{id:4,name:"gift4",coin:4,image:"/static/images/userpic.png"},{id:5,name:"gift5",coin:5,image:"/static/images/userpic.png"},{id:6,name:"gift6",coin:6,image:"/static/images/userpic.png"},{id:7,name:"gift7",coin:7,image:"/static/images/userpic.png"},{id:8,name:"gift8",coin:8,image:"/static/images/userpic.png"},{id:9,name:"gift9",coin:9,image:"/static/images/userpic.png"},{id:10,name:"gift10",coin:10,image:"/static/images/userpic.png"}],giftActiveId:0,list:[],anchorImgsData:{index:0,scale:1,list:[]},currentTime:0,horizentalAnchorImgMode:!1,horizentalAnchorImgVideo:!0}},onLoad:function(e){var i=this,n=this,a=uni.getSystemInfoSync();this.statusBarHeight=a.statusBarHeight,this.windowHeight=a.windowHeight,t.log("uni.getSystemInfoSync res:",a);var r=0;try{r=Number.parseInt(e.id)}catch(e){t.log("_id e:",e)}if(r<1)return uni.showToast({title:"直播间参数错误",icon:"none"}),uni.navigateBack({delta:1});n.id=r,(0,s.findOneById)({id:r}).then((function(t){n.detail=t.data.data,n.checkOnline(),n.detail.current_audience_ids.includes(n.user.id)||n.detail.current_audience_ids.push(n.user.id),n.detail.history_audience_ids.includes(n.user.id)||n.detail.history_audience_ids.push(n.user.id),n.anchorImgsData.list=t.data.data.anchor_imgs,i.anchorImgsData.list.length,n.anchorImgsData.list.length-1>0&&(n.anchorImgsData.index=n.anchorImgsData.list.length-1),1===n.detail.status&&(0,s.joinLive)({id:r}).then((function(t){uni.$on("live",n.handleLiveEvent)}))}))},mounted:function(){this.joinOrLeaveLive("join")},destroyed:function(){this.detail&&1===this.detail.status&&this.joinOrLeaveLive("leave"),uni.$off("live",this.handleLiveEvent)},onShow:function(){this.checkOnline()},onBackPress:function(){this.detail&&1===this.detail.status&&(this.joinOrLeaveLive("leave"),(0,s.leaveLive)({id:this.id})),uni.$off("live",this.handleLiveEvent)},computed:(0,a.default)((0,a.default)({},(0,o.mapState)({message:function(t){return t.user.message},user:function(t){return t.user.user}})),{},{nickname:function(){var e="";try{e=this.detail.user.nickname||this.detail.user.username}catch(i){t.log(i),e=""}try{e=e.substring(0,6)}catch(i){t.log(i)}return e},src:function(){var t="";return this.detail?(4===this.detail.status?this.detail.back_video_uri&&(t=this.detail.back_video_uri):t=0!==this.detail.id&&this.detail.address&&this.detail.address.flv?this.detail.address.flv:"",t):t}}),methods:{triged:function(){t.log("组件内点击了")},timeupdate:function(e){if(4===this.detail.status)try{var i=e.detail.currentTime;this.currentTime=parseInt(i)}catch(e){t.log("timeupdate error：",e)}},toHorizentalMode:function(){if(this.closeAnchorImgs(),this.horizentalAnchorImgMode=!0,this.horizentalAnchorImgVideo=!0,this.openHorizentalModeImgs(),4===this.detail.status){var e=this.currentTime;setTimeout((function(){var i=uni.createVideoContext("horizental-video-id");t.log("toHorizentalMode _video",i),i.seek(e)}),100)}},backHorizentalMode:function(){if(this.closeHorizentalModeImgs(),this.horizentalAnchorImgMode=!1,4===this.detail.status){var e=this.currentTime;setTimeout((function(){var i=uni.createVideoContext("vertical-video-id");t.log("backHorizentalMode _video",i),i.seek(e)}),100)}},checkOnline:function(){try{this.detail&&1===this.detail.status&&this.message.checkOnline()}catch(e){t.log(e)}},getLiveCurrentUserList:function(){var t=this,e=this;(0,s.liveCurrentUserList)({id:e.id}).then((function(e){t.list=e.data.data}))},handleLiveEvent:function(t){var e=this;if(t.live_id===this.id)switch(t.type){case"join":this.$refs.danmu.join({id:t.from_id,name:t.from_name,avatar:t.from_avatar}),this.detail.current_audience_ids.includes(t.from_id)||this.detail.current_audience_ids.push(t.from_id),this.detail.history_audience_ids.includes(t.from_id)||this.detail.history_audience_ids.push(t.from_id);break;case"leave":this.$refs.danmu.leave({id:t.from_id,name:t.from_name,avatar:t.from_avatar});var i=this.detail.current_audience_ids.indexOf(t.from_id);i>=0&&this.detail.current_audience_ids.splice(i,1);break;case"pause":this.detail.status=2;break;case"resume":this.detail.status=1;break;case"stop":return uni.showToast({title:"直播已经结束",icon:"none"}),uni.navigateBack({delta:1});case"comment":this.$refs.danmu.send({id:t.from_id,name:t.from_name,content:t.content}),this.content="";break;case"anchor_img":this.anchorImgsData.list.includes(t.content)?(this.anchorImgsData.index=this.anchorImgsData.list.indexOf(t.content),this.horizentalAnchorImgMode||this.$refs.anchorImgs.open()):(0,s.findOneById)({id:this.detail.id}).then((function(i){e.detail=i.data.data,e.anchorImgsData.list=i.data.data.anchor_imgs,0===e.anchorImgsData.list.length&&(e.anchorImgsData.list=["/static/demo/1.jpg","/static/demo/1.jpg","/static/images/userpic.png"]),e.anchorImgsData.list.includes(t.content)&&(e.anchorImgsData.index=e.anchorImgsData.list.indexOf(t.content)),e.horizentalAnchorImgMode||e.$refs.anchorImgs.open()}));break;case"gift":t.gift_image="imageUrl"+t.gift_image,this.detail.coin+=t.gift_coin*t.num,this.$refs.gift.send(d),this.closeGift();break;default:break}},joinOrLeaveLive:function(e){t.log("joinOrLeaveLive type:",e)},sendGift:function(){},back:function(){this.detail&&1===this.detail.status&&(this.joinOrLeaveLive("leave"),(0,s.leaveLive)({id:this.id})),uni.navigateBack({delta:1})},openGift:function(){this.$refs.giftPopup.open()},closeGift:function(){this.$refs.giftPopup.close()},openAnchorImgs:function(){this.$refs.anchorImgs.open()},closeAnchorImgs:function(){this.$refs.anchorImgs.close()},openHorizentalModeImgs:function(){this.$refs.horizentalAnchorImgModeImgs.open()},closeHorizentalModeImgs:function(){this.$refs.horizentalAnchorImgModeImgs.close()},openInput:function(){try{this.$refs.input.open()}catch(e){t.log(e)}},bannerChange:function(e){t.log(e)},anchorImgsIndexChg:function(e){try{this.anchorImgsData.index=e.detail.current}catch(i){t.log("anchorImgsIndexChg _e:",i)}},anchorImg:function(){var e=this;uni.chooseImage({count:1,success:function(i){if(i.tempFiles.length){var n=i.tempFiles[0];t.log("pre uploadToOss"),(0,r.uploadToOss)({tempFile:n}).then((function(i){var n=i;e.anchorImgsData.list.push(n),e.anchorImgsData.index=e.anchorImgsData.list.length-1,e.$refs.anchorImgs.open(),(0,s.comment)({id:e.id,type:"anchor_img",content:n}).then((function(e){t.log(e)}))})).catch((function(e){t.log(e)}))}}})},submit:function(){var e=this,i=this;if("string"!==typeof i.content||!i.content.trim())return i.content="",uni.showToast({title:"评论内容不能为空",icon:"none"});(0,s.comment)({id:i.id,content:i.content}).then((function(n){t.log(n);var a="";try{e.user&&(a=e.user.nickname||e.user.username)}catch(s){t.log(s)}i.$refs.danmu.send({id:i.detail.id,name:a,content:i.content.trim()}),i.content=""}));try{i.$refs.input.close()}catch(n){}},openCoin:function(){}}};e.default=c}).call(this,i("5a52")["default"])},4349:function(t,e,i){"use strict";i.r(e);var n=i("9d5c"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"46d1":function(t,e,i){"use strict";var n=i("65cf"),a=i.n(n);a.a},"59ac":function(t,e,i){"use strict";i.r(e);var n=i("8873"),a=i("4349");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);var r,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"1f758916",null,!1,n["a"],r);e["default"]=c.exports},"62f1":function(t,e,i){"use strict";i.r(e);var n=i("9a29"),a=i("0095");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("46d1"),i("78b8");var r,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"07f96dfb",null,!1,n["a"],r);e["default"]=c.exports},"65cf":function(t,e,i){var n=i("e433");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("015637f2",n,!0,{sourceMap:!1,shadowMode:!1})},"78b8":function(t,e,i){"use strict";var n=i("9afa"),a=i.n(n);a.a},"7e89":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"\nuni-video[data-v-07f96dfb]{width:%?750?%;height:%?1250?%}\n",""]),t.exports=e},8873:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{width:"540rpx",height:"100%"}},[t.joinData.flag?[i("v-uni-text",{staticClass:"pl-4 font text-warning"},[t._v(t._s(t.joinData.data.name)+": 进入了直播间")])]:t._e(),t.leaveData.flag?[i("v-uni-text",{staticClass:"pl-4 font text-warning"},[t._v(t._s(t.leaveData.data.name)+": 离开了直播间")])]:t._e(),i("v-uni-scroll-view",{staticClass:"pl-3",staticStyle:{width:"540rpx",height:"350rpx"},attrs:{"scroll-y":"true","scroll-with-animation":!0,"scroll-into-view":t.scrollInToView}},[t._l(t.list,(function(e,n){return[i("v-uni-view",{key:n+"_0",staticClass:"flex flex-row flex-wrap justify-start align-start rounded p-1 mb-1",staticStyle:{"background-color":"rgba(255,255,255,0.125)"},attrs:{id:"danmu"+e._id_}},["system"===e.type?[i("v-uni-text",{staticClass:"font-small text-info flex-1"},[t._v(t._s(e.content))])]:"join"===e.type?[i("v-uni-text",{staticClass:"font text-danger"},[t._v(t._s(e.name)+"：")]),i("v-uni-text",{staticClass:"font text-info flex-1"},[t._v("进入了直播间")])]:"leave"===e.type?[i("v-uni-text",{staticClass:"font text-danger"},[t._v(t._s(e.name)+"：")]),i("v-uni-text",{staticClass:"font text-info flex-1"},[t._v("离开了直播间")])]:[t._l(e.name,(function(e,n){return[i("v-uni-text",{key:n,staticClass:"font text-danger"},[t._v(t._s(e))])]})),i("v-uni-text",{staticClass:"font text-danger"},[t._v("：")]),t._l(e.contentArr,(function(e,n){return[i("v-uni-text",{key:n,staticClass:"font text-white"},[t._v(t._s(e))])]}))]],2)]}))],2)],2)},s=[]},"9a29":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={fGift:i("30b61").default,fDanmu:i("59ac").default,tuiIcon:i("0010").default,uniPopup:i("a196").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page flex-1 flex flex-column"},[t.detail?[t.horizentalAnchorImgMode?t._e():[i("v-uni-video",{ref:"vertical-video-id",staticClass:"flex-1",staticStyle:{width:"750rpx",height:"1250rpx"},attrs:{id:"vertical-video-id",src:t.src,autoplay:!0,controls:!!t.detail.back_video_uri},on:{timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)}}})],i("v-uni-view",{staticClass:"pt-2",staticStyle:{position:"fixed",left:"0",right:"0"},style:"top:"+t.statusBarHeight+"px"},[i("v-uni-view",{staticClass:"mt-2 px-2 flex flex-row justify-between align-center",staticStyle:{height:"80rpx"}},[i("v-uni-view",{staticClass:"flex flex-row justify-between rounded-circle pr-2",staticStyle:{"background-color":"rgba(0,0,0,0.1)"}},[i("v-uni-view",{staticClass:"p"},[i("v-uni-image",{staticClass:"rounded-circle",staticStyle:{width:"70rpx",height:"70rpx"},attrs:{src:t.detail.user.avatar||"/static/images/userpic.png"}})],1),i("v-uni-view",{staticClass:"flex-1 flex flex-column justify-center"},[i("v-uni-text",{staticClass:"text-white font"},[t._v(t._s(t.nickname))])],1),t._e()],2),(t.detail.status,t._e())],2),i("v-uni-view",{staticClass:"flex flex-column justify-start align-start",staticStyle:{width:"325rpx"}},[i("v-uni-text",{staticClass:"text-white rounded-circle px-2 ml-2 mt-1",staticStyle:{"background-color":"rgba(0,0,0,0.1)"}},[t._v("金币: "+t._s(t.detail.coin))]),i("v-uni-text",{staticClass:"text-white rounded-circle px-2 ml-2 mt-1",staticStyle:{"background-color":"rgba(0,0,0,0.1)"}},[t._v(t._s(t.detail.history_audience_ids.length)+"人看过")]),1===t.detail.status?[i("v-uni-text",{staticClass:"text-white rounded-circle px-2 ml-2 mt-1",staticStyle:{"background-color":"rgba(0,0,0,0.1)"}},[t._v(t._s(t.detail.current_audience_ids.length)+"人正在观看")])]:t._e()],2),4!==t.detail.status?[i("f-gift",{ref:"gift"})]:t._e()],2),2===t.detail.status?[i("v-uni-view",{staticClass:"text-center text-white font-md",staticStyle:{position:"fixed",top:"600rpx",left:"0",right:"0"}},[i("v-uni-text",[t._v("直播已经暂停")])],1)]:t._e(),[1,2].includes(t.detail.status)?[i("v-uni-view",{staticStyle:{position:"fixed",bottom:"240rpx",left:"0",right:"0"}},[i("f-danmu",{ref:"danmu"})],1)]:t._e(),i("v-uni-view",{staticClass:"flex flex-row align-center justify-between",staticStyle:{position:"fixed",left:"0",bottom:"100rpx",right:"0",height:"120rpx"}},[1!==t.detail.status?[i("v-uni-view")]:[i("v-uni-view",{staticClass:"px-2"},[i("v-uni-view",{staticClass:"btn px-3",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openInput.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"text-white font"},[t._v("说点什么...")])],1)],1)],i("v-uni-view",{staticClass:"flex flex-row align-center"},[i("v-uni-view",{staticClass:"btn btn-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openAnchorImgs.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"picture",color:"#fff",size:24}})],1),t._e(),i("v-uni-view",{staticClass:"btn btn-icon",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"back",color:"#fff",size:24}})],1)],2)],2),i("uni-popup",{ref:"input",attrs:{type:"bottom",id:"input"}},[i("v-uni-view",{staticClass:"bg-white flex flex-row align-center px-3",staticStyle:{height:"120rpx"}},[i("v-uni-input",{staticClass:"border rounded flex-1 px-3 font-md",staticStyle:{height:"80rpx"},attrs:{type:"text",focus:!0,placeholder:"说点什么..."},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),i("v-uni-view",{staticClass:"flex flex-column align-center justify-center py-2 px-2 ml-3 rounded",class:""===t.content?"bg-main-disabled":"bg-main",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font text-light-black"},[t._v("发送")])],1)],1)],1),i("uni-popup",{ref:"giftPopup",attrs:{type:"bottom",id:"giftPopup"}},[i("v-uni-view",{staticClass:"bg-white",staticStyle:{width:"750rpx",height:"550rpx"}},[i("v-uni-view",{staticClass:"flex flex-row justify-between align-center",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex flex-column align-center justify-center"},[i("v-uni-text",{staticClass:"text-main font-md ml-3"},[t._v("礼物")])],1),i("v-uni-view",{staticClass:"flex flex-column align-center justify-center",staticStyle:{width:"100rpx",height:"100rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeGift.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"close",size:32}})],1)],1),i("v-uni-swiper",{staticClass:"border-bottom border-top",staticStyle:{height:"350rpx"},attrs:{"indicator-dots":!0,duration:500}},t._l(Math.ceil(t.gifts.length/8),(function(e,n){return i("v-uni-swiper-item",{key:n},[i("v-uni-view",{staticClass:"flex flex-row flex-wrap justify-start"},[t._l(t.gifts,(function(e,a){return[a>=8*n&&a<8*(n+1)?[i("v-uni-view",{staticClass:"flex flex-column justify-center align-center",class:t.giftActiveId===e.id?"border border-main":"",staticStyle:{width:"187.5rpx",height:"175rpx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.giftActiveId=e.id}}},[i("v-uni-image",{staticStyle:{width:"100rpx",height:"100rpx"},attrs:{src:e.image}}),i("v-uni-view",{staticClass:"flex flex-row mt-1"},[i("v-uni-text",{staticClass:"text-warning font mr-1"},[t._v(t._s(e.name))]),i("v-uni-text",{staticClass:"text-secondary font"},[t._v(t._s(e.coin))])],1)],1)]:t._e()]}))],2)],1)})),1),i("v-uni-view",{staticClass:"flex flex-row align-center justify-end p-2 border-top",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex align-center justify-center py-1 px-2 mr-3 rounded bg-warning",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openCoin.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font text-white"},[t._v("充值")])],1),i("v-uni-view",{staticClass:"flex align-center justify-center py-1 px-2 mr-3 rounded bg-main",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendGift.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font text-light-black"},[t._v("发送")])],1)],1)],1)],1),i("uni-popup",{ref:"anchorImgs",attrs:{type:"bottom",id:"anchorImgs"}},[i("v-uni-view",{staticClass:"bg-white",staticStyle:{width:"750rpx",height:"550rpx"}},[i("v-uni-view",{staticClass:"flex flex-row justify-between align-center",staticStyle:{height:"100rpx"}},[i("v-uni-view",{staticClass:"flex flex-column align-center justify-center"},[i("v-uni-text",{staticClass:"text-main font-md ml-3"},[t._v("主播图片集")])],1),t.anchorImgsData.list.length?[i("v-uni-view",{staticClass:"flex flex-column align-center justify-center"},[i("v-uni-text",{staticClass:"text-main font-md ml-3",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toHorizentalMode.apply(void 0,arguments)}}},[t._v("横屏课件模式")])],1)]:t._e(),i("v-uni-view",{staticClass:"flex flex-column align-center justify-center",staticStyle:{width:"100rpx",height:"100rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeAnchorImgs.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"close",size:32}})],1)],2),i("v-uni-swiper",{staticClass:"border-bottom border-top",staticStyle:{width:"750rpx",height:"450rpx"},attrs:{"indicator-dots":!0,cancelable:!0,duration:500,current:t.anchorImgsData.index},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.anchorImgsIndexChg.apply(void 0,arguments)}}},[t._l(t.anchorImgsData.list,(function(e,n){return i("v-uni-swiper-item",{key:n,staticClass:"flex flex-column justify-center align-center ",staticStyle:{width:"750rpx",height:"450rpx",overflow:"scroll"}},[i("v-uni-scroll-view",{staticClass:"border",staticStyle:{width:"750rpx",height:"450rpx"},attrs:{"scroll-y":!0,"scroll-x":!0}},[i("v-uni-image",{staticClass:"border",staticStyle:{width:"750rpx"},style:"width:"+750*t.anchorImgsData.scale+"rpx;",attrs:{src:e,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),1===t.anchorImgsData.scale?t.anchorImgsData.scale=2:t.anchorImgsData.scale=1}}})],1)],1)})),0===t.anchorImgsData.list.length?i("v-uni-swiper-item",[i("v-uni-view",{staticClass:"flex flex-row justify-center align-center p-2"},[i("v-uni-text",[t._v("目前还没有图片")])],1)],1):t._e()],2)],1)],1),i("uni-popup",{ref:"horizentalAnchorImgModeImgs",attrs:{type:"bottom",id:"horizentalAnchorImgModeImgs"}},[i("v-uni-view",{staticClass:"bg-white",staticStyle:{width:"750rpx",height:"1250rpx"},style:"height:"+t.windowHeight+"px;"},[i("v-uni-view",{staticClass:"bg-dark position-relative flex flex-column justify-center align-center",staticStyle:{width:"1250rpx",height:"750rpx",transform:"rotate(90deg)","transform-origin":"375rpx 375rpx"},style:"width:"+t.windowHeight+"px;"},[i("v-uni-swiper",{staticClass:"border-bottom border-top",staticStyle:{width:"1250rpx",height:"750rpx"},style:"width:"+t.windowHeight+"px;",attrs:{"indicator-dots":!0,cancelable:!0,duration:500,current:t.anchorImgsData.index},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.anchorImgsIndexChg.apply(void 0,arguments)}}},[t._l(t.anchorImgsData.list,(function(e,n){return i("v-uni-swiper-item",{key:n,staticClass:"flex flex-column justify-center align-center ",staticStyle:{width:"1250rpx",height:"750rpx",overflow:"scroll"},style:"width:"+t.windowHeight+"px;"},[i("v-uni-scroll-view",{staticClass:"border",staticStyle:{width:"1250rpx",height:"750rpx"},style:"width:"+t.windowHeight+"px;",attrs:{"scroll-y":!0,"scroll-x":!0}},[i("v-uni-image",{staticStyle:{width:"1250rpx"},style:"width:"+t.windowHeight+"px;",attrs:{src:e,mode:"widthFix"}})],1)],1)})),0===t.anchorImgsData.list.length?i("v-uni-swiper-item",[i("v-uni-view",{staticClass:"flex flex-row justify-center align-center p-2"},[i("v-uni-text",[t._v("目前还没有图片")])],1)],1):t._e()],2),i("v-uni-view",{staticClass:"position-absolute flex flex-column justify-start align-center",staticStyle:{top:"0",right:"0",width:"200rpx",height:"420rpx"}},[i("v-uni-view",{staticClass:"flex flex-column justify-around align-center",staticStyle:{height:"200rpx"}},[i("tui-icon",{staticClass:"p-1 rounded-circle bg-trans-p20",attrs:{name:"close",color:"#fff",size:24},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.backHorizentalMode.apply(void 0,arguments)}}}),i("tui-icon",{staticClass:"p-1 rounded-circle bg-trans-p20",attrs:{name:"video",color:"#fff",size:24},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.horizentalAnchorImgVideo=!t.horizentalAnchorImgVideo}}})],1),[1,2].includes(t.detail.status)||4===t.detail.status&&t.horizentalAnchorImgVideo?[i("v-uni-view",{staticClass:"border bg-dark",staticStyle:{"align-self":"end",opacity:"0.6"},style:"opacity: "+(t.horizentalAnchorImgVideo?"0.6;":"0;")},[i("v-uni-video",{ref:"horizental-video-id",staticStyle:{width:"200rpx",height:"200rpx"},attrs:{id:"horizental-video-id",src:t.src,autoplay:!0,controls:!!t.detail.back_video_uri},on:{timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)}}})],1)]:t._e()],2)],1)],1)],1)]:t._e()],2)},s=[]},"9afa":function(t,e,i){var n=i("7e89");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("d58c1f9a",n,!0,{sourceMap:!1,shadowMode:!1})},"9d5c":function(t,e,i){"use strict";(function(t){i("a630"),i("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{scrollInToView:"",list:[{type:"system",id:0,_id_:1,name:"系统提示",content:"一生健康温馨提示，您需要遵循以下规则：\n\t\t\t\t\t1. 任何机构和个人不得通过映客平台对重大政治、军事、经济、社会、文化、体育等活动、事件的实况进行视音频直播。\n\t\t\t\t\t2. 严禁发表反党反政府的言论，或做出侮辱诋毁党和国家的行为。\n\t\t\t\t\t3. 严禁直接或间接传播淫秽、色情、挑逗性、大尺度内容。\n\t\t\t\t\t4. 严禁任何方式展示毒品、赌博打牌、枪支、管制刀具等。\n\t\t\t\t\t5. 严禁冒犯性、羞辱性、歧视性的语言和行为。\n\t\t\t\t\t6. 严禁进行任何形式广告宣传、恶意发布广告的行为。\n\t\t\t\t\t7. 禁止未成年人发起直播。"}],joinData:{flag:!1,data:{id:0,name:"",avatar:""}},leaveData:{flag:!1,data:{id:0,name:"",avatar:""}}}},mounted:function(){},methods:{send:function(e){var i=this;try{e["_id_"]=this.list.length,e.contentArr=Array.from(e.content),this.list.push(e),setTimeout((function(){i.toBottom()}),100)}catch(n){t.log(n)}},join:function(t){var e=this;this.joinData.data=t,this.joinData.flag=!0,setTimeout((function(){e.joinData.flag=!1}),2e3)},leave:function(t){var e=this;this.leaveData.data=t,this.leaveData.flag=!0,setTimeout((function(){e.leaveData.flag=!1}),2e3)},toBottom:function(){var e=this;setTimeout((function(){var i=e.list.length;if(i>0&&e.list[i-1])try{e.scrollInToView="danmu"+e.list[i-1]._id_}catch(n){t.log(n)}}),300),this.scrollInToView=""}}};e.default=n}).call(this,i("5a52")["default"])},a4b7:function(t,e,i){"use strict";var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.gift=e.comment=e.leaveLive=e.joinLive=e.liveCurrentUserList=e.edit=e.create=e.findOneById=e.list=void 0;var a=n(i("5c48")),s=function(t){return(0,a.default)({url:"/live/list",method:"POST",data:t})};e.list=s;var r=function(t){return(0,a.default)({url:"/live/findOneById",method:"POST",data:t})};e.findOneById=r;var o=function(t){return(0,a.default)({url:"/live/create",method:"POST",data:t})};e.create=o;var c=function(t){return(0,a.default)({url:"/live/edit",method:"POST",data:t})};e.edit=c;var l=function(t){return(0,a.default)({url:"/live/liveCurrentUserList",method:"POST",data:t})};e.liveCurrentUserList=l;var u=function(t){return(0,a.default)({url:"/live/joinLive",method:"POST",data:t})};e.joinLive=u;var d=function(t){return(0,a.default)({url:"/live/leaveLive",method:"POST",data:t})};e.leaveLive=d;var f=function(t){return(0,a.default)({url:"/live/comment",method:"POST",data:t})};e.comment=f;var h=function(t){return(0,a.default)({url:"/live/gift",method:"POST",data:t})};e.gift=h},a84c:function(t,e,i){"use strict";i.r(e);var n=i("e8d8"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},e433:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".page[data-v-07f96dfb]{flex:1}.btn[data-v-07f96dfb]{height:%?80?%;border-radius:%?100?%;background-color:hsla(0,0%,100%,.12);align-items:center;justify-content:center}.btn-icon[data-v-07f96dfb]{width:%?80?%;margin-right:%?20?%}",""]),t.exports=e},e8d8:function(t,e,i){"use strict";i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{defaultAvatar:"/static/tabbar/min.png",gifts:[]}},methods:{send:function(t){this.gifts.push(t),this.toBottom(),this.autoHide()},toBottom:function(){var t=this;this.$nextTick((function(){var e=t.gifts.length-1,i="item"+e;t.$refs[i]}))},autoHide:function(){var t=this;if(this.gifts.length)setTimeout((function(){t.gifts.splice(0,1)}),5e3)}}};e.default=n}}]);