(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mail-mail-mail"],{"0687":function(t,e,i){"use strict";i.r(e);var n=i("1aa3"),s=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=s.a},1524:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"rounded mr-2 px-2 py-1",class:t.disabled?"bg-light border":"main-bg-color",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickEvent.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"font",class:t.disabled?"text-light-muted":"text-white"},[t._v(t._s(t.name))])],1)},r=[]},"1aa3":function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("c740"),i("d81d"),i("a434"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("5530")),r=i("3353"),a=i("26cb"),c={data:function(){return{typeIndex:0,typeList:[{name:"公开",key:"all"},{name:"谁可以看",key:"only"},{name:"不给谁看",key:"except"},{name:"私密",key:"none"}],top:0,scrollHeight:0,scrollInto:"",current:"",selectList:[],type:"",limit:9,id:0}},onLoad:function(t){var e=uni.getSystemInfoSync();this.top=e.statusBarHeight+uni.upx2px(90),this.scrollHeight=e.windowHeight-this.top,t.type&&(this.type=t.type),t.limit&&(this.limit=parseInt(t.limit)),t.id&&(this.id=t.id,"inviteGroup"===t.type&&(this.limit=1)),this.$store.dispatch("getMailList")},computed:(0,s.default)((0,s.default)({},(0,a.mapState)({list:function(t){return t.user.mailList}})),{},{buttonText:function(){var t="发送";return"createGroup"===this.type&&(t="创建群组"),t+" ("+this.selectCount+")"},modalTop:function(){return(this.scrollHeight-uni.upx2px(150))/2},itemHeight:function(){var t=this.list.length;return t<1?0:this.scrollHeight/t},selectCount:function(){return this.selectList.length}}),methods:{touchstart:function(t){this.changeScrollInto(t)},touchmove:function(t){this.changeScrollInto(t)},touchend:function(t){this.current=""},changeScrollInto:function(t){var e=t.touches[0].pageY,i=Math.floor(e/this.itemHeight),n=this.list[i];n&&(this.scrollInto="item-"+n.title,this.current=n.title)},selectItem:function(t){if(!t.checked&&this.selectCount===this.limit)return uni.showToast({title:"最多选中 "+this.limit+" 个",icon:"none"});if(t.checked=!t.checked,t.checked)this.selectList.push(t);else{var e=this.selectList.findIndex((function(e){return e===t}));e>-1&&this.selectList.splice(e,1)}},submit:function(){if("see"!==this.type&&0===this.selectCount)return uni.showToast({title:"请先选择",icon:"none"});switch(this.type){case"createGroup":(0,r.create)({userIds:this.selectList.map((function(t){return t.userFriend.id}))}).then((function(t){uni.showToast({title:"创建群聊成功",icon:"none"}),uni.navigateBack({delta:1})}));break;case"sendCard":var e=this.selectList[0];uni.$emit("sendItem",{sendType:"card",data:e.name,type:"card",options:{avatar:e.avatar,id:e.user_id}}),uni.navigateBack({delta:1});break;case"remind":for(var i=[],n=0;n<this.selectList.length;n++){var s=this.selectList[n];s.userFriend&&i.push(s.userFriend.id)}uni.$emit("sendResult",{type:"remind",data:i}),uni.navigateBack({delta:1});break;case"see":var a=this.typeList[this.typeIndex].key;if("all"!==a&&"none"!==a&&!this.selectCount)return uni.showToast({title:"请先选择",icon:"none"});uni.$emit("sendResult",{type:"see",data:{k:a,v:this.selectList}}),uni.navigateBack({delta:1});break;case"inviteGroup":t.log(this.selectList);break}}}};e.default=c}).call(this,i("5a52")["default"])},"40db":function(t,e,i){"use strict";i.r(e);var n=i("1524"),s=i("9857");for(var r in s)"default"!==r&&function(t){i.d(e,t,(function(){return s[t]}))}(r);var a,c=i("f0c5"),l=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,"40510ab7",null,!1,n["a"],a);e["default"]=l.exports},9857:function(t,e,i){"use strict";i.r(e);var n=i("9a79"),s=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=s.a},"9a79":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{name:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{clickEvent:function(){this.disabled||this.$emit("click")}}};e.default=n},e406:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={freeNavBar:i("3e12").default,freeMainButton:i("40db").default,freeListItem:i("7474").default},s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("free-nav-bar",{attrs:{title:"选择",showBack:!0,showRight:!0}},[i("free-main-button",{attrs:{slot:"right",name:t.buttonText},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},slot:"right"})],1),i("v-uni-scroll-view",{style:"height:"+t.scrollHeight+"px;",attrs:{"scroll-y":"true","scroll-into-view":t.scrollInto}},["see"===t.type?t._l(t.typeList,(function(e,n){return i("free-list-item",{key:e.key,attrs:{title:e.name,showRightIcon:!1,showRight:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.typeIndex=n}}},[i("v-uni-view",{staticClass:"border rounded-circle flex align-center justify-center mr-4",staticStyle:{width:"40rpx",height:"40rpx"},attrs:{slot:"right"},slot:"right"},[t.typeIndex===n?i("v-uni-view",{staticClass:"main-bg-color rounded-circle",staticStyle:{width:"30rpx",height:"30rpx"}}):t._e()],1)],1)})):t._e(),"see"!==t.type||"see"===t.type&&(1===t.typeIndex||2===t.typeIndex)?t._l(t.list,(function(e,n){return i("v-uni-view",{key:n,attrs:{id:"item-"+e.title}},[e.list.length?i("v-uni-view",{staticClass:"py-2 px-3 border-bottom bg-light"},[i("v-uni-text",{staticClass:"font-md text-dark"},[t._v(t._s(e.title))])],1):t._e(),t._l(e.list,(function(e,n){return i("free-list-item",{key:n,attrs:{title:e.nickname,cover:e.userFriend&&e.userFriend.avatar?e.userFriend.avatar:"/static/images/userpic.png",showRightIcon:!1,showRight:!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectItem(e)}}},[i("v-uni-view",{staticClass:"border rounded-circle flex align-center justify-center mr-4",staticStyle:{width:"40rpx",height:"40rpx"},attrs:{slot:"right"},slot:"right"},[e.checked?i("v-uni-view",{staticClass:"main-bg-color rounded-circle",staticStyle:{width:"30rpx",height:"30rpx"}}):t._e()],1)],1)}))],2)})):t._e()],2),i("v-uni-view",{staticClass:"position-fixed right-0 bottom-0 bg-light flex flex-column",staticStyle:{width:"50rpx"},style:"top:"+t.top+"px;",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstart.apply(void 0,arguments)},touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.touchmove.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchend.apply(void 0,arguments)}}},t._l(t.list,(function(e,n){return i("v-uni-view",{key:n,staticClass:"flex-1 flex align-center justify-center"},[i("v-uni-text",{staticClass:"font-sm text-muted"},[t._v(t._s(e.title))])],1)})),1),t.current?i("v-uni-view",{staticClass:"position-fixed rounded-circle bg-light border flex align-center justify-center",staticStyle:{width:"150rpx",height:"150rpx",left:"300rpx"},style:"top:"+t.modalTop+"px;"},[i("v-uni-text",{staticClass:"font-lg"},[t._v(t._s(t.current))])],1):t._e()],1)},r=[]},fef9:function(t,e,i){"use strict";i.r(e);var n=i("e406"),s=i("0687");for(var r in s)"default"!==r&&function(t){i.d(e,t,(function(){return s[t]}))}(r);var a,c=i("f0c5"),l=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,"6595af27",null,!1,n["a"],a);e["default"]=l.exports}}]);