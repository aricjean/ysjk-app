(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-record-blood-sugar-blood-sugar"],{"1f8a":function(t,a,e){"use strict";var r=e("ee20"),i=e.n(r);i.a},"275c":function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){return r}));var r={freeNavBar:e("3e12").default,qiunDataCharts:e("8166").default,recordCalendar:e("0261").default,tuiModal:e("fd0a").default,tuiSwitch:e("0283").default,tuiScaleHorizontal:e("a64f").default,tuiButton:e("bef9").default},i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[e("free-nav-bar",{attrs:{title:"血糖记录(mmol/l)",showBack:!0,showRight:!1,bgColor:"bg-white"}}),e("br"),e("v-uni-view",{staticClass:"charts-box"},[e("qiun-data-charts",{attrs:{type:"line",opts:{enableScroll:!0,xAxis:{scrollShow:!0,itemCount:18,disableGrid:!0},extra:{line:{type:"curve"}}},chartData:t.chartData,inScrollView:!0,ontouch:!0,background:"none"}})],1),e("record-calendar",{attrs:{calendar:t.calendar},on:{calendarPrev:function(a){arguments[0]=a=t.$handleEvent(a),t.calendarPrev.apply(void 0,arguments)},calendarNext:function(a){arguments[0]=a=t.$handleEvent(a),t.calendarNext.apply(void 0,arguments)},pickDate:function(a){arguments[0]=a=t.$handleEvent(a),t.pickDate.apply(void 0,arguments)}}}),!1&!t.signed?e("v-uni-view",{staticClass:"tui-btn__sign",attrs:{"hover-class":"tui-btn-sign__hover","hover-stay-time":150},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addRecord(t.year,t.month,t.date)}}},[t._v("记录")]):t._e(),e("tui-modal",{attrs:{show:t.addRecordData.modal,custom:!0,fadeIn:!0,width:"100%",padding:"32rpx 0"},on:{cancel:function(a){arguments[0]=a=t.$handleEvent(a),t.addRecordCancel.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-modal-custom",staticStyle:{overflow:"hidden"}},[e("v-uni-view",{staticClass:"tui-prompt-title text-center",staticStyle:{"font-size":"46rpx"}},[t._v(t._s(t.addRecordData.title))]),e("v-uni-scroll-view",{staticStyle:{height:"600rpx"},attrs:{"scroll-y":"true"}},[e("br"),e("v-uni-view",{staticClass:"flex flex-row justify-center align-center"},[t._v("空腹："+t._s(t.addRecordData.empty_stomach)+"(mmol/l)"),e("tui-switch",{attrs:{scaleRatio:.5,checked:t.addRecordData.empty_stomach_sumbit},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.empty_stomach_sumbit=a.value}.apply(void 0,arguments)}}})],1),e("br"),e("br"),e("tui-scale-horizontal",{attrs:{value:t.addRecordData.empty_stomach_default_value,min:t.addRecordData.min,max:t.addRecordData.max,interval:t.addRecordData.interval},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.empty_stomach=a.value.toFixed(1)}.apply(void 0,arguments)}}}),e("br"),e("br"),e("v-uni-view",{staticClass:"flex flex-row justify-center align-center"},[t._v("早餐后："+t._s(t.addRecordData.after_breakfast)+"(mmol/l)"),e("tui-switch",{attrs:{scaleRatio:.5,checked:t.addRecordData.after_breakfast_sumbit},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_breakfast_sumbit=a.value}.apply(void 0,arguments)}}})],1),e("br"),e("br"),e("tui-scale-horizontal",{attrs:{value:t.addRecordData.after_breakfast_default_value,min:t.addRecordData.min,max:t.addRecordData.max,interval:t.addRecordData.interval},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_breakfast=a.value.toFixed(1)}.apply(void 0,arguments)}}}),e("br"),e("br"),e("v-uni-view",{staticClass:"flex flex-row justify-center align-center"},[t._v("午餐后："+t._s(t.addRecordData.after_lunch)+"(mmol/l)"),e("tui-switch",{attrs:{scaleRatio:.5,checked:t.addRecordData.after_lunch_sumbit},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_lunch_sumbit=a.value}.apply(void 0,arguments)}}})],1),e("br"),e("br"),e("tui-scale-horizontal",{attrs:{value:t.addRecordData.after_lunch_default_value,min:t.addRecordData.min,max:t.addRecordData.max,interval:t.addRecordData.interval},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_lunch=a.value.toFixed(1)}.apply(void 0,arguments)}}}),e("br"),e("br"),e("v-uni-view",{staticClass:"flex flex-row justify-center align-center"},[t._v("晚餐后："+t._s(t.addRecordData.after_dinner)+"(mmol/l)"),e("tui-switch",{attrs:{scaleRatio:.5,checked:t.addRecordData.after_dinner_sumbit},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_dinner_sumbit=a.value}.apply(void 0,arguments)}}})],1),e("br"),e("br"),e("tui-scale-horizontal",{attrs:{value:t.addRecordData.after_dinner_default_value,min:t.addRecordData.min,max:t.addRecordData.max,interval:t.addRecordData.interval},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),function(a){t.addRecordData.after_dinner=a.value.toFixed(1)}.apply(void 0,arguments)}}}),e("br"),e("br")],1),e("v-uni-view",{staticClass:"p-2 m-4"},[e("tui-button",{attrs:{height:"72rpx",size:28,shape:"circle"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addRecordOk.apply(void 0,arguments)}}},[t._v("立即提交")])],1)],1)],1)],1)},n=[]},5702:function(t,a,e){"use strict";var r;e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){return r}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"tui-scale__box"},[t.isPointer?e("v-uni-view",{staticClass:"tui-scale__pointer",style:{width:t.pointerWidth+"px",height:t.pointerWidth+"px",background:t.pointerColor,top:t.pointerTop+"px"}},[e("v-uni-view",{staticClass:"tui-scale__triangle",style:{top:t.pointerWidth+"px",borderLeftWidth:t.pointerWidth/2+"px",borderRightWidth:t.pointerWidth/2+"px",borderTopColor:t.pointerColor,borderTopWidth:t.pointerWidth+"px"}})],1):t._e(),e("v-uni-scroll-view",{style:{width:t.scrollWidth+"px",background:t.backgroundColor,paddingBottom:t.paddingBottom+"rpx"},attrs:{throttle:!1,"scroll-x":!0,"scroll-with-animation":!0,"scroll-left":t.currentLeft},on:{scroll:function(a){arguments[0]=a=t.$handleEvent(a),t.handleScroll.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"tui-scale__flex"},[e("v-uni-view",{staticClass:"tui-seat__box",style:{width:t.scrollWidth/2+"px"}}),e("v-uni-view",[e("v-uni-view",{staticClass:"tui-tickmarks__box",style:{height:t.lHeight+"rpx",borderLeftColor:t.lineColor}},t._l(t.rulerLength,(function(a,r){return e("v-uni-view",{key:r,staticClass:"tui-scale__flex"},t._l(t.tickMarks,(function(a,r){return e("v-uni-view",{key:r,staticClass:"tui-tick__marks",style:{height:t.getHeight(r,t.height,t.mHeight,t.lHeight),width:t.singleWidth+"px",borderRightColor:t.lineColor}})})),1)})),1),e("v-uni-view",{staticClass:"tui-scale__flex"},[e("v-uni-view",{staticClass:"tui-scale__num",style:{width:10*t.singleWidth+"px",fontSize:t.size+"rpx",paddingTop:t.top+"rpx",color:t.color}},[t._v(t._s(t.min))]),t._l(t.rulerLength,(function(a,r){return e("v-uni-view",{key:r,staticClass:"tui-scale__num",style:{width:10*t.singleWidth+"px",fontSize:t.size+"rpx",paddingTop:t.top+"rpx",color:t.color}},[t._v(t._s((r+1)*t.interval+t.min))])}))],2)],1),e("v-uni-view",{staticClass:"tui-seat__box",style:{width:t.scrollWidth/2-10*t.singleWidth+"px"}})],1)],1)],1)},n=[]},"57dc":function(t,a,e){"use strict";var r=e("716f"),i=e.n(r);i.a},"6f0f":function(t,a,e){"use strict";e.r(a);var r=e("275c"),i=e("f0a0");for(var n in i)"default"!==n&&function(t){e.d(a,t,(function(){return i[t]}))}(n);e("57dc");var d,o=e("f0c5"),l=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"39407e60",null,!1,r["a"],d);a["default"]=l.exports},"716f":function(t,a,e){var r=e("9a4a");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=e("4f06").default;i("483901f2",r,!0,{sourceMap:!1,shadowMode:!1})},"8d67":function(t,a,e){var r=e("24fb");a=r(!1),a.push([t.i,".tui-scale__box[data-v-89b6273e]{position:relative}.tui-scroll__view[data-v-89b6273e]{display:flex}.tui-tickmarks__box[data-v-89b6273e]{display:flex;border-left:1px solid;box-sizing:border-box;position:relative}.tui-scale__flex[data-v-89b6273e]{display:flex;box-sizing:border-box}.tui-tick__marks[data-v-89b6273e]{border-right:1px solid;box-sizing:border-box}.tui-scale__num[data-v-89b6273e]{text-align:center;flex-shrink:0;-webkit-transform:translate(-50%);transform:translate(-50%);padding-left:1px;box-sizing:border-box}.tui-seat__box[data-v-89b6273e]{flex-shrink:0}.tui-scale__pointer[data-v-89b6273e]{position:absolute;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);font-size:0;z-index:10}.tui-scale__triangle[data-v-89b6273e]{position:absolute;left:0;width:0;height:0;border-top-style:solid;border-left-style:solid;border-right-style:solid;border-left-color:transparent;border-right-color:transparent;vertical-align:top}",""]),t.exports=a},"9a4a":function(t,a,e){var r=e("24fb");a=r(!1),a.push([t.i,".tui-charts-box[data-v-39407e60]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;\n\t/* -webkit-box-pack: center; */justify-content:center}.charts-box[data-v-39407e60]{width:100%;height:400px}.tui-btn__sign[data-v-39407e60]{width:%?340?%;height:%?72?%;border-radius:%?72?%;position:fixed;left:50%;bottom:%?60?%;-webkit-transform:translateX(-50%);transform:translateX(-50%);z-index:3;color:#fff;background:linear-gradient(90deg,#ff9d4b,#fa523e);box-shadow:0 %?10?% %?14?% 0 rgba(250,82,62,.2);display:flex;align-items:center;justify-content:center}.tui-btn-sign__hover[data-v-39407e60]{background:linear-gradient(90deg,#e48642,#e14b38)}",""]),t.exports=a},"9ab9":function(t,a,e){"use strict";(function(t){var r=e("4ea4");e("99af"),e("a9e3"),e("c35a"),e("e25e"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("96cf");var i=r(e("1da1")),n=e("d594"),d=e("d4f8"),o={data:function(){return{healthUserId:0,list:[],chartData:{legend:{show:!0,type:"scroll",position:"bottom"},enableScroll:!0,categories:[],xAxis:{type:"category",axisLine:!0},yAxis:{type:"value"},series:[{type:"line",name:"",connectNulls:!0,data:[]}]},calendar:{year:2021,month:6,frontItemNum:0,behindItemNum:0,data:[]},year:2020,month:7,date:7,signed:!1,addRecordData:{title:"血糖记录",modal:!1,year:0,month:0,date:0,min:2.9,max:19,interval:1,empty_stomach_default_value:6,empty_stomach:6,empty_stomach_sumbit:!0,after_breakfast_default_value:6,after_breakfast:6,after_breakfast_sumbit:!0,after_lunch_default_value:6,after_lunch:6,after_lunch_sumbit:!0,after_dinner_default_value:6,after_dinner:6,after_dinner_sumbit:!0,default_value:6,value:6}}},onLoad:function(a){uni.setNavigationBarTitle({title:"血糖记录"}),this.refreshToday();try{var e=parseInt(a.healthUserId);e===e&&(this.healthUserId=e,this.initCalendar())}catch(r){t.log(r)}},mounted:function(){},methods:{refreshToday:function(){var t=new Date;t.getHours();this.year=t.getFullYear(),this.month=t.getMonth()+1,this.date=t.getDate()},dotClick:function(a){t.log(a)},initCalendar:function(){this.refreshToday();var t=this.year,a=this.month;this.calendar.year=t,this.calendar.month=a,this.setCalendar(t,a)},calendarNext:function(){t.log("calendarNext");var a=this.calendar.year,e=this.calendar.month,r=new Date("".concat(a,"/").concat(e,"/01 00:00:00")),i=new Date(new Date(r).setMonth(r.getMonth()+1)),n=i.getFullYear(),d=i.getMonth()+1;this.isFuture({year:this.year,month:this.month},{year:n,month:d})?uni.showToast({title:"不能访问未来的时间",icon:"none",duration:2e3}):this.setCalendar(n,d)},calendarPrev:function(){t.log("calendarPrev");var a=this.calendar.year,e=this.calendar.month,r=new Date("".concat(a,"/").concat(e,"/01 00:00:00")),i=new Date(new Date(r).setMonth(r.getMonth()-1)),n=i.getFullYear(),d=i.getMonth()+1;this.setCalendar(n,d)},isFuture:function(t,a){var e=!1;return a.year>t.year||(a.year===t.year&&a.month>t.month||(a.year===t.year&&a.month===t.month&&a.date>t.date||e))},getMonthDay:function(t,a){var e=new Date(t,a,0).getDate();return e},getWeekday:function(t,a){var e=new Date("".concat(t,"/").concat(a,"/01 00:00:00"));return e.getDay()},setCalendar:function(a,e){var r=this;return(0,i.default)(regeneratorRuntime.mark((function i(){var o,l,s,c,u,h;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:for(o=r,r.refreshToday(),t.log("year:",a),t.log("month:",e),o.calendar.year=a,o.calendar.month=e,o.calendar.data=[],l=o.getMonthDay(a,e),s=o.getWeekday(a,e),c=42-l-s,u=[],h=0;h<s;h++)u.push({});o.getMonthDay(o.calendar.year,o.calendar.month),(0,n.monthRecordList)({healthUserId:o.healthUserId,year:a,month:e}).then((function(r){if(t.log(r),o.list=r.data.data,a===o.year&&e===o.month)for(var i=0;i<o.list.length;i++){var n=o.list[i];n.date===o.date&&(o.signed=!0)}for(var s={},h=0;h<o.list.length;h++){var f=o.list[h];s[d.IntYMD.getYMD(f.ymd).day]=f}o.chartData.categories=[],o.chartData.series=[{type:"line",name:"空腹",connectNulls:!0,data:[]},{type:"line",name:"早餐后",connectNulls:!0,data:[]},{type:"line",name:"午餐后",connectNulls:!0,data:[]},{type:"line",name:"晚餐后",connectNulls:!0,data:[]}];for(var v=0;v<l;v++)s[v+1]?(u.push({date:v+1,value:s[v+1],signed:!0}),Number.isFinite(s[v+1]["empty_stomach"])?o.chartData.series[0].data.push(s[v+1]["empty_stomach"]):o.chartData.series[0].data.push(null),Number.isFinite(s[v+1]["after_breakfast"])?o.chartData.series[1].data.push(s[v+1]["after_breakfast"]):o.chartData.series[1].data.push(null),Number.isFinite(s[v+1]["after_lunch"])?o.chartData.series[2].data.push(s[v+1]["after_lunch"]):o.chartData.series[2].data.push(null),Number.isFinite(s[v+1]["after_dinner"])?o.chartData.series[3].data.push(s[v+1]["after_dinner"]):o.chartData.series[3].data.push(null)):(u.push({date:v+1,value:0,signed:!1}),o.chartData.series[0].data.push(null),o.chartData.series[1].data.push(null),o.chartData.series[2].data.push(null),o.chartData.series[3].data.push(null)),o.chartData.categories.push(v+1+"");for(var m=0;m<c;m++)u.push({});o.calendar.data=u})).catch((function(a){t.log(a)}));case 14:case"end":return i.stop()}}),i)})))()},pickDate:function(a,e,r){if(this.refreshToday(),t.log("year, month, date,",a,e,r),t.log("this.year, month, date,",this.year,this.month,this.date),this.isFuture({year:this.year,month:this.month,date:this.date},{year:a,month:e,date:r}))uni.showToast({title:"不能在未来的时间记录",icon:"none",duration:2e3});else{for(var i=!1,n=0;n<this.list.length;n++){var d=this.list[n];d.year===a&&d.month===e&&d.date===r&&this.addRecord(a,e,r,d.empty_stomach,d.after_breakfast,d.after_lunch,d.after_dinner)}i||this.addRecord(a,e,r)}},addRecord:function(a,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.addRecordData.year=a,this.addRecordData.month=e,this.addRecordData.date=r,i&&(this.addRecordData.empty_stomach=i,this.addRecordData.empty_stomach_default_value=i),n&&(this.addRecordData.after_breakfast=n,this.addRecordData.after_breakfast_default_value=n),d&&(this.addRecordData.after_lunch=d,this.addRecordData.after_lunch_default_value=d),o&&(this.addRecordData.after_dinner=o,this.addRecordData.after_dinner_default_value=o),this.addRecordData.modal=!0,t.log("this.addRecordData.modal:",this.addRecordData.modal)},addRecordChange:function(t){this.addRecordData.value=t.value.toFixed(1)},addRecordOk:function(){var t=this,a={healthUserId:this.healthUserId,ymd:d.IntYMD.getData(this.addRecordData.year,this.addRecordData.month,this.addRecordData.date)};this.addRecordData.empty_stomach_sumbit&&(a.empty_stomach=Number.parseFloat(this.addRecordData.empty_stomach)),this.addRecordData.after_breakfast_sumbit&&(a.after_breakfast=Number.parseFloat(this.addRecordData.after_breakfast)),this.addRecordData.after_lunch_sumbit&&(a.after_lunch=Number.parseFloat(this.addRecordData.after_lunch)),this.addRecordData.after_dinner_sumbit&&(a.after_dinner=Number.parseFloat(this.addRecordData.after_dinner)),this.addRecordData.modal=!1,(0,n.add)(a).then((function(a){t.setCalendar(t.calendar.year,t.calendar.month)}))},addRecordCancel:function(){this.addRecordData.modal=!1}}};a.default=o}).call(this,e("5a52")["default"])},"9b86":function(t,a,e){"use strict";e.r(a);var r=e("fbb6"),i=e.n(r);for(var n in r)"default"!==n&&function(t){e.d(a,t,(function(){return r[t]}))}(n);a["default"]=i.a},a64f:function(t,a,e){"use strict";e.r(a);var r=e("5702"),i=e("9b86");for(var n in i)"default"!==n&&function(t){e.d(a,t,(function(){return i[t]}))}(n);e("1f8a");var d,o=e("f0c5"),l=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"89b6273e",null,!1,r["a"],d);a["default"]=l.exports},c35a:function(t,a,e){var r=e("23e7"),i=e("7e12");r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},d594:function(t,a,e){"use strict";var r=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.monthRecordList=a.add=void 0;var i=r(e("5c48")),n=function(t){return(0,i.default)({url:"/blood-sugar-record/add",method:"POST",data:t})};a.add=n;var d=function(t){return(0,i.default)({url:"/blood-sugar-record/monthRecordList",method:"POST",data:t})};a.monthRecordList=d},ee20:function(t,a,e){var r=e("8d67");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=e("4f06").default;i("8246c016",r,!0,{sourceMap:!1,shadowMode:!1})},f0a0:function(t,a,e){"use strict";e.r(a);var r=e("9ab9"),i=e.n(r);for(var n in r)"default"!==n&&function(t){e.d(a,t,(function(){return r[t]}))}(n);a["default"]=i.a},fbb6:function(t,a,e){"use strict";e("a9e3"),e("e25e"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r={name:"tuiScaleHorizontal",props:{value:{type:Number,default:0},width:{type:Number,default:0},backgroundColor:{type:String,default:"#FEFEFE"},paddingBottom:{type:[Number,String],default:30},min:{type:Number,default:0},max:{type:Number,default:10},interval:{type:Number,default:1},height:{type:Number,default:40},mHeight:{type:Number,default:60},lHeight:{type:Number,default:80},lineColor:{type:String,default:"#333"},singleWidth:{type:Number,default:8},size:{type:[Number,String],default:32},color:{type:String,default:"#000"},top:{type:Number,default:12},isPointer:{type:Boolean,default:!0},pointerWidth:{type:Number,default:12},pointerColor:{type:String,default:"#5677fc"},pointerTop:{type:Number,default:-12}},data:function(){return{tickMarks:10,rulerLength:1,scrollWidth:0,currentLeft:0}},created:function(){this.getWidth(),this.getLength()},mounted:function(){this.getLeft()},watch:{width:function(t){this.getWidth()},max:function(t){this.getLength()},min:function(t){this.getLength()},value:function(t){this.getLeft()}},methods:{getWidth:function(){if(this.width)this.scrollWidth=this.width;else{var t=uni.getSystemInfoSync();this.scrollWidth=t.windowWidth}},getLength:function(){this.rulerLength=parseInt((this.max-this.min)/this.interval)},getLeft:function(){var t=this.value;t<this.min&&(t=this.min),t>this.max&&(t=this.max),this.currentLeft=10*this.singleWidth/this.interval*(t-this.min)},getHeight:function(t,a,e,r){var i=a;return 4===t&&(i=e),9===t&&(i=r),"".concat(i,"rpx")},handleScroll:function(t){var a=t.detail.scrollLeft,e=this.min+a/this.singleWidth/10*this.interval;e<this.min&&(e=this.min),e>this.max&&(e=this.max),this.$emit("change",{value:e})}}};a.default=r}}]);